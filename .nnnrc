#===============================================================================
# nnn file manager
# Link:   https://github.com/jarun/nnn
# Usage:  https://github.com/jarun/nnn/wiki/Usage
#===============================================================================

# nnn file directory
nnn_dir=$(
  [ -e "$HOME/tmp/" ] \
  && printf "$HOME/tmp/nnn" \
  || printf "$HOME/.config/nnn"
)

mkdir -p $nnn_dir

# Bookmarks
export NNN_BMS="p:$HOME/.local/profile;t:$HOME/tmp"

export NNN_OPTS="acdEHJPx" \
  NNN_ARCHIVE="\\.(7z|bz2|gz|tar|tgz|zip)$" \
  NNN_COLORS='4321' \
  NNN_FCOLORS='c1e2272e006033f7c6d6abc4' \
  NNN_OPENER=$EDITOR

export NNN_SEL="$nnn_dir/.selection" \
  NNN_FIFO="$nnn_dir/.fifo"

n () {
  # Block nesting of nnn in subshells
  if [ -n $NNNLVL ] && [ "${NNNLVL:-0}" -ge 1 ]; then
    echo "nnn is already running"
    return
  fi

  # Unmask ^Q (, ^V etc.)
  #stty start undef
  #stty stop undef
  #stty lwrap undef
  #stty lnext undef

  nnn "$@"
}

